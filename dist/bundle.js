!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var a=n(1),o=i(a),r=n(2),s=i(r),u=n(3),l=i(u),d=n(4),c=i(d),m=n(5),g=i(m),f=n(6),p=i(f),v=n(7),_=i(v),S=n(8),h=i(S),y=n(9),N=i(y),w=n(10),F=i(w);n(11);for(var b=document.getElementsByClassName("loginSignupModule__triggerToInit"),E=0,L=b.length;E<L;E++)!function(t,e){b[t].addEventListener("click",function(){document.body.classList.add("overflow-hidden");var t=(0,F.default)(),e=(0,s.default)({action:null,mode:null,step:0,hadUserAnAccount:null,data:{email:null,password:null,firstName:null,lastName:null}}),n=(0,_.default)(),i=(0,c.default)(),a=(0,g.default)({urls:N.default,requestMaker:i,urlGenerator:n}),r=(0,p.default)({urls:N.default,requestMaker:i}),u=(0,o.default)(e.getState(),h.default,N.default);u.init(e.getState());var d=document.getElementById("loginSignupModule__children");t.slideToRightAndFadeIn(d),(0,l.default)(u,e,t,a,r).init(),document.getElementById("loginSignupModule").style.display="block"})}(E)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n){function i(){var t=a(),e=o();document.getElementById("loginSignupModule").innerHTML='\n      <div class="loginSignupForm_topActionBar">\n        <span class = "loginSignupForm__close">X</span>\n      </div>\n\t\t\t<div\n\t\t\t\tid="loginSignupModule__children"\n\t\t\t\tclass="loginSignupModule__children">\n\t\t\t\t'+(t+e)+'\n\t\t\t</div>\n      <div class="loginSignupForm_continueButtonBar"></div>\n    '}function a(){var t={url:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Circle-icons-brush-pencil.svg/512px-Circle-icons-brush-pencil.svg.png",alt:"logoCompany"};return'\n  \t\t<header class = "loginSignupForm__header">\n  \t\t\t<img \tclass = "loginSignupForm__logo"\n  \t\t\t\t\tsrc = "'+t.url+'"\n  \t\t\t\t\talt="'+t.alt+'">\n  \t\t\t<h1 class = "loginSignupForm__company-name">\n          '+e.initial.welcome+"\n        </h1>\n  \t\t</header>"}function o(){return'\n      <div id="secundaryNode">\n\t\t\t\t<div class="loginSignupForm__loginBtn-wrapper">\n\t\t\t\t\t<button class="loginSignupForm__loginBtn loginSignupForm__loginBtn--fb">\n\t\t\t\t\t\t'+e.initial.login.facebook+'\n\t\t\t\t\t\t<i class="fa fa-facebook" aria-hidden="true"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="loginSignupForm__loginBtn loginSignupForm__loginBtn--manual">\n\t\t\t\t\t\t'+e.initial.login.email+'\n\t\t\t\t\t\t<i class="fa fa-keyboard-o" aria-hidden="true"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t'+E()+"\n\t\t\t\t</div>\n\t\t\t</div>"}function r(){if(t.step===U)return i(),void(document.getElementById("loginSignupModule__children").style.opacity=1);s(t.step);var e=document.getElementsByClassName("loginSignupForm__header")[I];e.innerHTML="";var n=document.getElementById("secundaryNode");if(n.innerHTML="",t.mode===P)return void u(t,{header:e,body:n});t.mode}function s(t){var e=document.getElementsByClassName("loginSignupForm_topActionBar")[I];(t===U||t===D)&&e.childElementCount>1&&k(e),t===H&&1===e.childElementCount&&(e.innerHTML+='<span class = "loginSignupForm__goBack"><-</span>')}function u(t,e){var n=d(t),i=c(t);if(t.step===H){document.getElementsByClassName("loginSignupForm__header")[I].classList.add("text-left")}e.header.innerHTML=n,e.body.innerHTML=i,l(t)}function l(t){var e=document.getElementsByClassName("loginSignupForm_continueButtonBar")[I];e.innerHTML="",e.innerHTML=L({disabled:!0,step:t.step})}function d(t){return void 0===t.step?void alert(e.errors.general):t.step===H?"<h1>"+e.email.title+"</h1>":t.step!==j||t.hadUserAnAccount?t.step===j&&t.hadUserAnAccount?"<h1>"+e.password.login.title+"</h1>":t.step===R?"<h1>"+e.names.title+"</h1>":t.step===D?"":void 0:"<h1>"+e.password.signup.title+"</h1>"}function c(t){var i=void 0;return t.step===H&&(i=p()),t.step===j&&(i=S()+h(n.restorePassword,e.password.forgot)),t.step===R&&(i=w()+b()),t.step===D&&(i=A(t)),m(i,t)}function m(t,e){return e.step===D?'\n        <div class="loginSignupForm__form loginSignupForm__form--confirmation">\n          '+t+"\n        </div>":'<div class="loginSignupForm__form">'+t+"</div>"}function g(t){return'<label class="loginSignupForm__label">'+t+"</label>"}function f(){return'\n      <input\n        type="email"\n        name="loginSignupForm__email"\n\t\t\t\tclass="loginSignupForm__input loginSignupForm__input-email"\n\t\t\t/>'}function p(){return'\n\t\t\t<div class="relative">\n\t\t\t\t'+g(e.email.label)+" "+f()+"\n\t\t\t</div>"}function v(){return'\n\t\t\t<input\n\t\t\t\ttype="password"\n\t\t\t\tname="loginSignupForm__password"\n\t\t\t\tclass="loginSignupForm__input loginSignupForm__input-password"\n        data-encrypted="true"\n\t\t\t/>'}function _(){return'\n      <button class="loginSignupModule__btn-encrypted">\n        <i class="fa fa-eye" aria-hidden="true"></i>\n      </button>'}function S(){return'\n\t\t\t<div class="relative">\n\t\t\t\t'+g(e.password.login.label)+"\n        "+v()+"\n        "+_()+"\n\t\t\t</div>"}function h(t,e){return'<p class="loginSignupForm__forgotPassword">'+y(t,e)+"</p>"}function y(t,e){return'<a href="'+t+'">'+e+"</a>"}function N(){return'\n\t    <input\n\t      type="text"\n\t      name="loginSignupForm__firstName"\n\t      class="loginSignupForm__input loginSignupForm__input-firstName"\n\t    />'}function w(){return'\n\t\t\t<div class="relative">\n\t\t\t\t'+g(e.names.label.firstName)+"\n        "+N()+"\n\t\t\t</div>"}function F(){return'\n\t    <input\n\t      type="text"\n\t      name="loginSignupForm__lastName"\n\t      class="loginSignupForm__input loginSignupForm__input-lastName"\n\t    />'}function b(){return'\n\t\t\t<div class="relative">\n\t\t\t\t'+g(e.names.label.lastName)+" "+F()+"\n\t\t\t</div>"}function E(){return'\n      <p class="loginSignupForm__terms">'+e.initial.termsAndConditions+'\n\t\t\t\t<a href="url_terms">'+e.initial.here+"</a>\n\t\t\t</p>"}function L(t){var n=C()?e.common.continue:">";return'\n\t    <button\n        id="loginSignupForm__btn-continue"\n        class="loginSignupForm__btn-continue '+(t.disabled?"disabled":"")+" "+B(t.step)+'">\n\t    \t'+n+"\n\t    </button>"}function B(t){return t===U?"loginSignupForm__btn-initial":t===H?"loginSignupForm__btn-email":t===j?"loginSignupForm__btn-password":t===R?"loginSignupForm__btn-names":t===D?"loginSignupForm__btn-confirmation":void 0}function A(t){return'<i class="fa fa-check-circle-o" aria-hidden="true"></i>'+T(t)}function T(t){return"<h1>"+M(t)+"</h1>"}function M(t){return t.hadUserAnAccount?e.confirmation.login.hey+" "+t.data.firstName+", <br>\n        "+e.confirmation.login.whatsup:e.confirmation.signup.welcome+" "+t.data.firstName+"!"}function C(){return window.innerWidth>1024}function k(t){t.children[t.childElementCount-1].remove()}function O(t){V(t),x(t)}function V(t){var e=document.getElementsByClassName("loginSignupForm__label"),n=0;for(e.length;n<e.length;n++)e[n].classList.add("incorrect")}function x(t){var e=document.getElementsByClassName("loginSignupForm__input"),n=0;for(e.length;n<e.length;n++)e[n].classList.add("incorrect")}var P="MANUAL",I=0,U=0,H=1,j=2,R=3,D=4;return{init:i,render:r,showError:O}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(t){l.mode=t}function n(t){l.step=t}function i(t){l.hadUserAnAccount=t}function a(){return l}function o(t){void 0!==t&&(void 0!==t.email&&(l.data.email=t.email),void 0!==t.password&&(l.data.password=t.password),void 0!==t.firstName&&(l.data.firstName=t.firstName),void 0!==t.lastName&&(l.data.lastName=t.lastName))}function r(){return l.hadUserAnAccount}function s(){return{email:l.data.email,password:l.data.password}}function u(){return{email:l.data.email,password:l.data.password,firstName:l.data.firstName,lastName:l.data.lastName}}var l=t;return{setState:o,setMode:e,setStep:n,setHadUserAnAccount:i,getState:a,getHadUserAnAccount:r,getDataToLogin:s,getDataToSignup:u}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,n,i,a){function o(){document.getElementById("loginSignupModule").addEventListener("click",function(t){r(t)}),document.addEventListener("click",function(i){if(-1!==i.target.className.indexOf(R)){var a=e.getState().step;e.setStep(a-1),t.render(e.getState()),O(e.getState())}if(-1!==i.target.className.indexOf(D)){var o=document.getElementById("loginSignupModule__children");n.slideToLeftAndFadeOut(o),document.body.classList.remove(q),setTimeout(function(){document.getElementById("loginSignupModule").style.display="none"},$)}})}function r(i){var a=i.target;if(B(a.className)){e.setMode(z);var o=document.getElementsByClassName("loginSignupForm__loginBtn-wrapper")[V];return n.slideToLeftAndFadeOut(o),void setTimeout(function(){s(),e.setStep(W),t.render(e.getState()),u()},$)}g(a.className)}function s(){document.getElementById("loginSignupModule").removeEventListener("click",function(t){r(t)})}function u(){var t=document.getElementsByClassName("loginSignupForm__input-email")[V],e=document.getElementsByClassName("loginSignupForm__btn-email")[V];t.addEventListener("input",function(t){C(t,e)}),t.addEventListener("keyup",function(t){k(t)}),e.addEventListener("click",function t(e){var n=document.getElementsByClassName("loginSignupForm__input-email")[V].value;i.isValidEmail(n)||13!==e.keycode||alert("Mostrar error, email no valido:' "+n),l(n),this.removeEventListener("click",t)})}function l(a){e.setState({email:a});var o=document.getElementsByClassName("loginSignupForm__form")[V];n.slideToLeftAndFadeOut(o);var r=i.userExists({email:a});console.log(r),setTimeout(function(){e.setState(r),void 0===r.error?e.setHadUserAnAccount(!1):(e.setHadUserAnAccount(!0),e.setState({password:r.password})),setTimeout(function(){e.setStep(G),t.render(e.getState()),d()},$)},0)}function d(){function n(t,e){var n=e.querySelector("i"),i="true"===t?"fa-eye":"fa-eye-slash",a="true"===t?"fa-eye-slash":"fa-eye";n.classList.add(i),n.classList.remove(a)}var a=document.getElementsByClassName("loginSignupForm__input-password")[V],o=document.getElementsByClassName("loginSignupForm__btn-password")[V],r=e.getState().hadUserAnAccount,s=document.getElementsByClassName("loginSignupModule__btn-encrypted")[V];s.addEventListener("click",function(){var t=F(a.dataset.encrypted);b(a,t),n(t,s),a.dataset.encrypted=t}),a.addEventListener("input",function(t){p(t)}),a.addEventListener("keyup",function(n){var a=[n.target.value,n.keyCode],o=a[0],s=a[1];return o!==e.getState().data.password&&s===P&&r?void t.showError(e.getState()):s!==P||i.isValidPassword(o)?void(s===P&&i.isValidPassword(o)&&(e.setState({password:o}),c())):void alert("Mostrar error, password no valido:' "+o)}),o.addEventListener("click",function(){var n=document.getElementsByClassName("loginSignupForm__input-password")[V].value;return i.isValidPassword(n)?n!==e.getState().data.password&&r?void t.showError(e.getState()):(e.setState({password:n}),void c()):void alert("password not valid")})}function c(){var i=e.getDataToLogin();if(e.getHadUserAnAccount())try{A(i),f({duration:1e3})}catch(t){return void alert(t.message)}else{var a=document.getElementsByClassName("loginSignupForm__form")[V];n.slideToLeftAndFadeOut(a),setTimeout(function(){e.setStep(Z),t.render(e.getState()),m()},$)}}function m(){var t=document.getElementsByClassName("loginSignupForm__btn-names")[V],n=document.getElementsByClassName("loginSignupForm__input-firstName")[V],i=document.getElementsByClassName("loginSignupForm__input-lastName")[V];n.addEventListener("keyup",function(n){var i={firstName:document.getElementsByClassName("loginSignupForm__input-firstName")[0].value,lastName:document.getElementsByClassName("loginSignupForm__input-lastName")[0].value};if(e.setState({firstName:n.target.value}),y(n.target),a.isValidName(n.target.value)&&(v(t,i),n.keycode===P)){var o=e.getDataToSignup();a.isValid(o)&&M(o)}}),i.addEventListener("keyup",function(n){var i={firstName:document.getElementsByClassName("loginSignupForm__input-firstName")[0].value,lastName:document.getElementsByClassName("loginSignupForm__input-lastName")[0].value};if(e.setState({lastName:n.target.value}),y(n.target),a.isValidName(n.target.value)&&(v(t,i),n.keycode===P)){var o=e.getDataToSignup();a.isValid(o)&&M(o)}}),t.addEventListener("click",function(){var t=e.getDataToSignup();a.isValid(t)&&M(t)})}function g(t){return-1!==t.indexOf(U)}function f(a){var o=document.getElementsByClassName("loginSignupForm__form")[V];n.slideToLeftAndFadeOut(o),setTimeout(function(){e.setStep(Q),t.render(e.getState())},$),setTimeout(function(){i.redirect()},a.duration+$)}function p(t){var e=t.target,n=e.value,a=document.getElementsByClassName("loginSignupForm__btn-continue")[V];if(i.isValidPassword(n))return e.classList.remove(H),void a.classList.remove(H);e.classList.add(H),a.classList.add(H)}function v(t,e){if(a.areValidNames(e)&&h(t))return void _(t);a.areValidNames(e)||S(t)}function _(t){t.classList.remove(H)}function S(t){t.classList.add(H)}function h(t){return t.className.indexOf(H)!==x}function y(t){if(!a.isValidName(t.value)&&L(t))return w({show:!1,target:t}),void t.classList.remove(j);a.isValidName(t.value)&&!L(t)&&(w({show:!0,target:t}),t.classList.add(j))}function N(){var t=document.createElement("i");return t.className+="fa fa-check hisInputIsValid",t.setAttribute("aria-hidden","true"),t}function w(t){var e=t.target.parentNode;if(t.show)return void e.appendChild(N());e.removeChild(e.children[e.childElementCount-1])}function F(t){return"true"===t?"false":"true"}function b(t,e){var n=E(e);t.setAttribute("type",n)}function E(t){return"true"===t?"password":"text"}function L(t){return"I"===t.parentNode.lastElementChild.nodeName}function B(t){return-1!==t.indexOf(I)}function A(t){if(200!==i.perform(t).status)throw{message:"show user could not log in. Something wrong happened!"}}function T(t){if(200!==a.perform(t).status)throw{message:"show user could not signup. Something wrong happened!"}}function M(i){try{T(i);var a=document.getElementsByClassName("loginSignupForm__form")[V];n.slideToLeftAndFadeOut(a),e.setHadUserAnAccount(!1),setTimeout(function(){e.setStep(Q),t.render(e.getState())},$)}catch(t){alert(t.message)}}function C(t,e){var n=t.target.value;if(i.isValidEmail(n))return void e.classList.remove(H);e.classList.add(H)}function k(t){var e=t.target.value,n=t.keyCode;if(n===P&&i.isValidEmail(e))return void l(e);n!==P||i.isValidEmail(e)||alert("Mostrar error, email no valido:' "+e)}function O(t){t.step===W&&u(),t.step===G&&d()}var V=0,x=-1,P=13,I="loginSignupForm__loginBtn--manual",U="loginSignupForm__loginBtn--fb",H="disabled",j="checked",R="loginSignupForm__goBack",D="loginSignupForm__close",q="overflow-hidden",z="MANUAL",W=1,G=2,Z=3,Q=4,$=200;return{init:o}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=void 0;$.ajax({url:t.url,method:t.method,data:t.data}).then(function(t){return t={user:{id:165976,firstName:"Francesc",lastName:"Travesa",email:"francesc.travesa@gmail.com",facebookId:"10154791231944620",password:"rw8SQdM1HNAeuegYx/z3DwcS8K3s31ezgwQV2dEW1rAGGfprLXmQR6HTRxx3ULlUxvAmmtiMSbB0qAUpOk+uow=="}},e=t,t})}function e(t){window.location=t}return{perform:t,redirect:e}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(t){return console.log("doing userExists"),u.perform({url:s.get.users,method:"get",data:t})}function n(t){return console.log("doing"),u.perform({url:s.login,method:"post",data:t})}function i(){var t=l.getRedirectByState();u.redirect(t)}function a(t){return o(t.email)&&r(t.password)}function o(t){var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return t.match(e)}function r(t){return t.length>5}var s=t.urls,u=t.requestMaker,l=t.urlGenerator;return{isValidEmail:o,isValidPassword:r,isValid:a,userExists:e,perform:n,redirect:i}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){return t.requestMaker.post(t.login,"post",e)}function n(t){return i(t.email)&&a(t.password)&&o(t.firstName)&&o(t.lastName)}function i(t){var e=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;return t.match(e)}function a(t){return t.length>5}function o(t){if(void 0!==t&&null!==t&&!(t.length<=3))return!0}function r(t){if(void 0!==t.firstName&&void 0!==t.lastName&&null!==t.firstName&&null!==t.lastName&&""!==t.firstName&&""!==t.lastName&&(o(t.firstName)||o(t.lastName)))return!0}return{isValidName:o,areValidNames:r,isValid:n,perform:e}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(t){return"/B2B"}return{getRedirectUrlByState:e}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={initial:{welcome:"Welcome to my app!",login:{facebook:"Continue with facebook",email:"Continue with email"},termsAndConditions:"Find out our TOS & privacy policy",here:"here"},email:{title:"What's your email?",label:"Email address"},password:{login:{title:"and, your password?",label:"Password"},signup:{title:"Create your password",label:"Password"},forgot:"Forgot your password?"},names:{title:"What's your name?",label:{firstName:"First name",lastName:"Last name"}},confirmation:{login:{hey:"Hey",whatsup:"what's up?"},signup:{welcome:"Welcome"}},errors:{general:"Something went wrong"},common:{continue:"Continue"}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={get:{users:"/app_dev.php/users"},post:{login:"/app_dev.php/site-login",signup:"/app_dev.php/site-registe"},restorePassword:"/restorePassword"};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){t.classList.remove("fadeOut"),t.classList.add("fadeIn")}function e(t){t.classList.remove("fadeIn"),t.classList.add("fadeOut")}function n(t){t.classList.remove("slideToLeft"),t.classList.add("slideToRight")}function i(t){t.classList.remove("slideToRight"),t.classList.add("slideToLeft")}function a(e){n(e),t(e),setTimeout(function(){e.style.display=u},200)}function o(t){n(t),e(t),setTimeout(function(){t.style.display=l},200)}function r(e){i(e),t(e),setTimeout(function(){e.style.display=u},200)}function s(t){i(t),e(t),setTimeout(function(){t.style.display=l},200)}var u="block",l="none";return{fadeIn:t,fadeOut:e,slideToRight:n,slideToLeft:i,slideToRightAndFadeIn:a,slideToRightAndFadeOut:o,slideToLeftAndFadeIn:r,slideToLeftAndFadeOut:s}};e.default=i},function(t,e){}]);